[![snyk](https://snyk.io/test/github/teunmooij/payload/badge.svg)](https://snyk.io/test/github/teunmooij/payload)
[![npm version](https://badge.fury.io/js/payload-openapi.svg)](https://badge.fury.io/js/payload-openapi)

# payload-openapi

Generate openapi 3 documentation for your [payload cms](https://payloadcms.com).

If you want to publish the document with a swagger UI, use [payload-swagger](https://www.npmjs.com/package/payload-swagger) instead.

Version 0.x releases should be considered `beta`. Semantic version is not guaranteed until we reach version 1.

## Installation

With yarn:

```shell
yarn add payload-openapi
```

With npm:

```shell
npm install payload-openapi
```

## Usage

`payload-openapi` creates openAPI documents, version 3.0, as javascript object. If you need a yaml file, please use a library like `yaml` to convert it.

```typescript
import { createDocument } from 'payload-swagger';
import payloadConfig from '...';

const openapiDocument = createDocument(payloadConfig, {
  /* see options section */
});
```

## Extend the openAPI document

The openapi document generated by `payload-openapi` includes information from the following external sources:

- `package.json`: `payload-openapi` uses the information in the fields shown below. In `openapi` a partial openapi document can be included;

```json
{
  "name": "my payload cms",
  "version": "1.2.3",
  "description": "My awesome cms",
  "license": "MIT",
  "openapi": {}
}
```

- `.openapi`: optional file with partial openapi document in JSON format.

The data from all these source is recursively merged into the final document.

## Options

`payload-openapi` has the following options:

```typescript
interface Options {
  /**
   * By default the access functions on all collections in the config are called to determine
   * the access level of the operations.
   * Provide an array of collection slugs to disable this for the given collections,
   * or `true` to disable for all.
   */
  disableAccessAnalysis?: boolean | string[];
}
```

## Version history

### 0.1.x

- Initial version, before it was part op `payload-swagger`
